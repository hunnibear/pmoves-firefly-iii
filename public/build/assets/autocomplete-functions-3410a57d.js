import{f as m,r as p}from"./vendor-824d08a0.js";import{a as _,b as f,G as g}from"./get-51a7c3ed.js";function l(){return{id:"",name:"",alpine_name:""}}function y(){return{description:[],amount:[],currency_code:[],foreign_amount:[],foreign_currency_code:[],source_account:[],destination_account:[],budget_id:[],category_name:[],piggy_bank_id:[],bill_id:[],tags:[],notes:[],internal_reference:[],external_url:[],latitude:[],longitude:[],zoom_level:[],date:[],interest_date:[],book_date:[],process_date:[],due_date:[],payment_date:[],invoice_date:[]}}function I(){let t=m(new Date,"yyyy-MM-dd HH:mm");return{description:"",amount:"",currency_code:"EUR",foreign_amount:"",foreign_currency_code:"",source_account:l(),destination_account:l(),budget_id:null,category_name:"",piggy_bank_id:null,bill_id:null,tags:[],notes:"",internal_reference:"",external_url:"",hasLocation:!1,latitude:null,longitude:null,zoomLevel:null,date:t,interest_date:"",book_date:"",process_date:"",due_date:"",payment_date:"",invoice_date:"",errors:y()}}let b=class{list(t){return _.get("/api/v2/currencies",{params:t})}};function x(){let e={page:1,limit:1337};return new b().list(e).then(a=>{let n={defaultCurrency:{},nativeCurrencies:[],foreignCurrencies:[],enabledCurrencies:[]};n.foreignCurrencies.push({id:0,name:"(no foreign currency)",code:"",default:!1,symbol:"",decimal_places:2});for(let i in a.data.data)if(a.data.data.hasOwnProperty(i)){let r=a.data.data[i];if(r.attributes.enabled){let u={id:r.id,name:r.attributes.name,code:r.attributes.code,default:r.attributes.default,symbol:r.attributes.symbol,decimal_places:r.attributes.decimal_places};u.default&&(n.defaultCurrency=u),n.enabledCurrencies.push(u),n.nativeCurrencies.push(u),n.foreignCurrencies.push(u)}}return n})}class h{list(t){return _.get("/api/v2/budgets",{params:t})}}function q(){let e={page:1,limit:1337};return new h().list(e).then(a=>{let n=[{id:0,name:"(no budget)"}];for(let i in a.data.data)if(a.data.data.hasOwnProperty(i)){let r=a.data.data[i],u={id:r.id,name:r.attributes.name};n.push(u)}return n})}function C(){let e={page:1,limit:1337};return new f().list(e).then(a=>{let n={0:{id:0,name:"(no group)",order:0,piggyBanks:[{id:0,name:"(no piggy bank)",order:0}]}};for(let i in a.data.data)if(a.data.data.hasOwnProperty(i)){let r=a.data.data[i],u=r.attributes.object_group_id??"0",c=r.attributes.object_group_title??"(no group)",o={id:r.id,name:r.attributes.name,order:r.attributes.order};n.hasOwnProperty(u)||(n[u]={id:u,name:c,order:r.attributes.object_group_order??0,piggyBanks:[]}),n[u].piggyBanks.push(o),n[u].piggyBanks.sort((d,s)=>d.order-s.order)}return Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{})})}function w(){let e={page:1,limit:1337};return new g().list(e).then(a=>{let n={0:{id:0,name:"(no group)",order:0,subscriptions:[{id:0,name:"(no subscription)",order:0}]}};for(let i in a.data.data)if(a.data.data.hasOwnProperty(i)){let r=a.data.data[i],u=r.attributes.object_group_id??"0",c=r.attributes.object_group_title??"(no group)",o={id:r.id,name:r.attributes.name,order:r.attributes.order};n.hasOwnProperty(u)||(n[u]={id:u,name:c,order:r.attributes.object_group_order??0,subscriptions:[]}),n[u].subscriptions.push(o),n[u].subscriptions.sort((d,s)=>d.order-s.order)}return Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{})})}function j(){return{description:"/api/v2/autocomplete/transaction-descriptions",account:"/api/v2/autocomplete/accounts",category:"/api/v2/autocomplete/categories",tag:"/api/v2/autocomplete/tags"}}function $(e){const t={server:e.serverUrl,serverParams:{},fetchOptions:{headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content}},hiddenInput:!0,highlightTyped:!0,liveServer:!0};typeof e.filters<"u"&&e.filters.length>0&&(t.serverParams.types=e.filters),typeof e.onRenderItem<"u"&&e.onRenderItem!==null&&(t.onRenderItem=e.onRenderItem),e.valueField&&(t.valueField=e.valueField),e.labelField&&(t.labelField=e.labelField),e.onSelectItem&&(t.onSelectItem=e.onSelectItem),e.onChange&&(t.onChange=e.onChange),e.hiddenValue&&(t.hiddenValue=e.hiddenValue),p.init(e.selector,t)}function A(e,t){const a=parseInt(t._searchInput.attributes["data-index"].value);if(typeof e<"u"&&e.name){document.querySelector("#form")._x_dataStack[0].$data.entries[a].category_name=e.name;return}document.querySelector("#form")._x_dataStack[0].$data.entries[a].category_name=t._searchInput.value}function G(e,t){const a=parseInt(t._searchInput.attributes["data-index"].value);if(typeof e<"u"&&e.description){document.querySelector("#form")._x_dataStack[0].$data.entries[a].description=e.description;return}document.querySelector("#form")._x_dataStack[0].$data.entries[a].description=t._searchInput.value}function O(e,t){if(typeof e>"u"){const a=parseInt(t._searchInput.attributes["data-index"].value);if(document.querySelector("#form")._x_dataStack[0].$data.entries[a].destination_account.name===t._searchInput.value){console.warn('Ignore hallucinated destination account name change to "'+t._searchInput.value+'"');return}document.querySelector("#form")._x_dataStack[0].$data.entries[a].destination_account={name:t._searchInput.value,alpine_name:t._searchInput.value},document.querySelector("#form")._x_dataStack[0].changedDestinationAccount()}}function B(e,t){const a=parseInt(t._searchInput.attributes["data-index"].value);document.querySelector("#form")._x_dataStack[0].$data.entries[a].destination_account={id:e.id,name:e.name,alpine_name:e.name,type:e.type,currency_code:e.currency_code},document.querySelector("#form")._x_dataStack[0].changedDestinationAccount()}function P(e,t){if(typeof e>"u"){const a=parseInt(t._searchInput.attributes["data-index"].value);if(document.querySelector("#form")._x_dataStack[0].$data.entries[a].source_account.name===t._searchInput.value)return;document.querySelector("#form")._x_dataStack[0].$data.entries[a].source_account={name:t._searchInput.value,alpine_name:t._searchInput.value},document.querySelector("#form")._x_dataStack[0].changedSourceAccount()}}function D(e,t){const a=parseInt(t._searchInput.attributes["data-index"].value);document.querySelector("#form")._x_dataStack[0].$data.entries[a].source_account={id:e.id,name:e.name,alpine_name:e.name,type:e.type,currency_code:e.currency_code},document.querySelector("#form")._x_dataStack[0].changedSourceAccount()}export{q as a,C as b,w as c,y as d,I as e,$ as f,P as g,O as h,B as i,j,A as k,x as l,G as m,D as s};
