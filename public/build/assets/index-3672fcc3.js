import{d as h,f as g}from"./format-money-32daba98.js";import{M as w,I as p,f as m,i,l as y}from"./vendor-596566c8.js";/* empty css                       */import{G as b}from"./get-5c0a4ab7.js";class M{constructor(){this.type="all",this.rowCount=null,this.sortModel=null}rowCount(){return console.log("The row count is: ",this.rowCount),this.rowCount}getRows(e){console.log("The sort model used is: ",e.sortModel);let n=[];for(let o in e.sortModel)if(e.sortModel.hasOwnProperty(o)){let a=e.sortModel[o];n.push({column:a.colId,direction:a.sort})}new b().infiniteList({start_row:e.startRow,end_row:e.endRow,type:this.type,sorting:n}).then(o=>{this.parseAccounts(o.data.data,e.successCallback),this.rowCount=o.data.meta.pagination.total,console.log("The row count is: ",this.rowCount)}).catch(o=>{console.log(o)})}parseAccounts(e,n){let l=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o],s={};s.id=a.id,s.name=a.attributes.name,l.push(s)}return console.log("accounts length = ",l.length),n(l,!1),l}setType(e){this.type=e}}const c=new M,r=window.location.href.split("/"),C=r[r.length-1];c.setType(C);document.addEventListener("cellEditRequest",()=>{console.log("Loaded through event listener.")});let u;const R=["description","amount","date"],_=t=>{console.log("onCellEditRequestMethod");const e=t.data,n=t.colDef.field;let l=t.newValue;if(!R.includes(n)){console.log("Field "+n+" is not editable.");return}n==="amount"&&(l=t.newValue.amount,console.log("New value is now"+l)),console.log('New value for field "'+n+'" in transaction journal #'+e.transaction_journal_id+" of group #"+e.id+' is "'+l+'"'),e[n]=l,u.getRowNode(String(t.rowIndex)).updateData(e),e.transaction_journal_id};document.addEventListener("cellValueChanged",()=>{console.log("I just realized a cell value has changed.")});document.addEventListener("onCellValueChanged",()=>{console.log("I just realized a cell value has changed.")});const v={rowModelType:"infinite",datasource:c,onCellEditRequest:_,readOnlyEdit:!0,cacheOverflowSize:1,cacheBlockSize:20,columnDefs:[{field:"icon",editable:!1,headerName:"",sortable:!1,width:40,cellRenderer:function(t){return t.getValue()?'<a href="./transactions/show/'+parseInt(t.value.id)+'"><em class="'+t.value.classes+'"></em></a>':""}},{field:"name",cellDataType:"text",editable:!0,cellRenderer:function(t){return t.getValue()?'<a href="./accounts/show/'+parseInt(t.data.id)+'">'+t.getValue()+"</a>":""}}]};w.registerModules([p]);let E=function(){return{notifications:{error:{show:!1,text:"",url:""},success:{show:!1,text:"",url:""},wait:{show:!1,text:""}},totalPages:1,page:1,tableColumns:{name:{enabled:!0}},table:null,formatMoney(t,e){return g(t,e)},format(t){return m(t,i.t("config.date_time_fns"))},init(){this.notifications.wait.show=!0,this.notifications.wait.text=i.t("firefly.wait_loading_data"),u=y(document.querySelector("#grid"),v)}}},d={index:E,dates:h};function f(){Object.keys(d).forEach(t=>{console.log(`Loading page component "${t}"`);let e=d[t]();Alpine.data(t,()=>e)}),Alpine.start()}document.addEventListener("firefly-iii-bootstrapped",()=>{console.log("Loaded through event listener."),f()});window.bootstrapped&&(console.log("Loaded through window variable."),f());
