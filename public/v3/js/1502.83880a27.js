"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[1502],{1502:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Q});var i=t(3673);const s={class:"row q-mx-md"},n={class:"col-xl-4 col-lg-6 col-md-12 q-pa-xs"},l=(0,i._)("div",{class:"text-h6"},"Email address",-1),o=(0,i._)("p",{class:"text-primary"}," If you change your email address you will be logged out. You must confirm your address change before you can login again. ",-1),d=(0,i.Uk)("Change address");function r(e,a,t,r,u,c){const m=(0,i.up)("q-card-section"),p=(0,i.up)("q-icon"),f=(0,i.up)("q-input"),g=(0,i.up)("q-btn"),h=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),w=(0,i.up)("q-fab-action"),q=(0,i.up)("q-fab"),_=(0,i.up)("q-page-sticky"),y=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(y,null,{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i._)("div",n,[(0,i.Wm)(b,{bordered:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[l])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{outlined:"",type:"email",required:"",modelValue:u.emailAddress,"onUpdate:modelValue":a[0]||(a[0]=e=>u.emailAddress=e),label:"Email address"},{prepend:(0,i.w5)((()=>[(0,i.Wm)(p,{name:"fas fa-envelope"})])),_:1},8,["modelValue"]),o])),_:1}),u.emailTouched?((0,i.wg)(),(0,i.j4)(h,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{flat:"",onClick:c.confirmAddressChange},{default:(0,i.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})):(0,i.kq)("",!0)])),_:1})])]),(0,i.Wm)(_,{position:"bottom-right",offset:[18,18]},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{label:"Actions",square:"","vertical-actions-align":"right","label-position":"left",color:"green",icon:"fas fa-chevron-up",direction:"up"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{color:"primary",square:"",to:{name:"profile.data"},icon:"fas fa-database",label:"Manage data"},null,8,["to"])])),_:1})])),_:1})])),_:1})}var u=t(5474);class c{get(){return u.api.get("/api/v1/about/user")}put(e,a){return console.log("here we are"),u.api.put("/api/v1/users/"+e,a)}logout(){return u.api.post("/logout")}}const m={name:"Index",data(){return{tab:"mails",id:0,emailAddress:"",emailOriginal:"",emailTouched:!1}},watch:{emailAddress:function(e){this.emailTouched=!1,this.emailOriginal!==e&&(this.emailTouched=!0)}},created(){this.getUserInfo()},methods:{getUserInfo:function(){(new c).get().then((e=>{this.emailAddress=e.data.data.attributes.email,this.emailOriginal=e.data.data.attributes.email,this.id=parseInt(e.data.data.id)}))},confirmAddressChange:function(){this.$q.dialog({title:"Confirm",message:"Are you sure?",cancel:!0,persistent:!1}).onOk((()=>{this.submitAddressChange()})).onCancel((()=>{})).onDismiss((()=>{}))},submitAddressChange:function(){(new c).put(this.id,{email:this.emailAddress}).then((e=>{(new c).logout()}))}}};var p=t(4260),f=t(4379),g=t(151),h=t(5589),b=t(4842),w=t(4554),q=t(9367),_=t(2165),y=t(4264),A=t(9200),C=t(9975),k=t(7518),v=t.n(k);const Z=(0,p.Z)(m,[["render",r]]),Q=Z;v()(m,"components",{QPage:f.Z,QCard:g.Z,QCardSection:h.Z,QInput:b.Z,QIcon:w.Z,QCardActions:q.Z,QBtn:_.Z,QPageSticky:y.Z,QFab:A.Z,QFabAction:C.Z})}}]);