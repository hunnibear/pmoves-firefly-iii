"use strict";(globalThis["webpackChunkfirefly_iii"]=globalThis["webpackChunkfirefly_iii"]||[]).push([[1381],{1381:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(9835),i=a(6970);const r=(0,n.Uk)("Edit"),o=(0,n.Uk)("Delete");function s(e,t,a,s,l,u){const d=(0,n.up)("q-th"),p=(0,n.up)("q-tr"),c=(0,n.up)("router-link"),g=(0,n.up)("q-td"),m=(0,n.up)("q-item-label"),h=(0,n.up)("q-item-section"),w=(0,n.up)("q-item"),f=(0,n.up)("q-list"),y=(0,n.up)("q-btn-dropdown"),b=(0,n.up)("q-table"),k=(0,n.up)("q-fab-action"),_=(0,n.up)("q-fab"),q=(0,n.up)("q-page-sticky"),Z=(0,n.up)("q-page"),W=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{title:e.$t("firefly.currencies"),rows:l.rows,columns:l.columns,"row-key":"id",onRequest:u.onRequest,pagination:l.pagination,"onUpdate:pagination":t[0]||(t[0]=e=>l.pagination=e),loading:l.loading,class:"q-ma-md"},{header:(0,n.w5)((e=>[(0,n.Wm)(p,{props:e},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,(t=>((0,n.wg)(),(0,n.j4)(d,{key:t.name,props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,n.w5)((e=>[(0,n.Wm)(p,{props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{key:"name",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{to:{name:"currencies.show",params:{code:e.row.code}},class:"text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.row.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.Wm)(g,{key:"name",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.row.code),1)])),_:2},1032,["props"]),(0,n.Wm)(g,{key:"menu",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{color:"primary",label:"Actions",size:"sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{clickable:"",to:{name:"currencies.edit",params:{code:e.row.code}}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[r])),_:1})])),_:1})])),_:2},1032,["to"])),[[W]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{clickable:"",onClick:t=>u.deleteCurrency(e.row.code,e.row.name)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[o])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[W]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","onRequest","pagination","loading"]),(0,n.Wm)(q,{position:"bottom-right",offset:[18,18]},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{label:"Actions",square:"","vertical-actions-align":"right","label-position":"left",color:"green",icon:"fas fa-chevron-up",direction:"up"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{color:"primary",square:"",to:{name:"currencies.create"},icon:"fas fa-exchange-alt",label:"New currency"},null,8,["to"])])),_:1})])),_:1})])),_:1})}var l=a(7913),u=a(6108),d=a(3555);const p={name:"Index",watch:{$route(e){"currencies.index"===e.name&&(this.page=1,this.updateBreadcrumbs(),this.triggerUpdate())}},data(){return{rows:[],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100},loading:!1,columns:[{name:"name",label:"Name",field:"name",align:"left"},{name:"name",label:"Code",field:"code",align:"left"},{name:"menu",label:" ",field:"menu",align:"right"}],store:null}},computed:{},created(){this.pagination.rowsPerPage=this.getListPageSize,this.store=(0,d.S)()},mounted(){this.type=this.$route.params.type,null!==this.store.getRange.start&&null!==this.store.getRange.end||this.store.$onAction((({name:e,$store:t,args:a,after:n,onError:i})=>{n((t=>{"setRange"===e&&(this.range=t,this.triggerUpdate())}))})),null!==this.store.getRange.start&&null!==this.store.getRange.end&&(this.range={start:this.store.getRange.start,end:this.store.getRange.end},this.triggerUpdate())},methods:{deleteCurrency:function(e,t){this.$q.dialog({title:"Confirm",message:'Do you want to delete currency "'+t+'"? Any and all transactions linked to this currency will be deleted as well.',cancel:!0,persistent:!0}).onOk((()=>{this.destroyCurrency(e)}))},destroyCurrency:function(e){new l.Z("currencies").destroy(e).then((()=>{this.store.refreshCacheKey(),this.triggerUpdate()}))},updateBreadcrumbs:function(){this.$route.meta.pageTitle="firefly.currencies",this.$route.meta.breadcrumbs=[{title:"currencies"}]},onRequest:function(e){this.page=e.pagination.page,this.triggerUpdate()},triggerUpdate:function(){if(this.loading)return;if(null===this.range.start||null===this.range.end)return;this.loading=!0;const e=new u.Z;this.rows=[],e.list(this.page,this.getCacheKey).then((e=>{this.pagination.rowsPerPage=e.data.meta.pagination.per_page,this.pagination.rowsNumber=e.data.meta.pagination.total,this.pagination.page=this.page;for(let t in e.data.data)if(e.data.data.hasOwnProperty(t)){let a=e.data.data[t],n={id:a.id,name:a.attributes.name,code:a.attributes.code};this.rows.push(n)}this.loading=!1}))}}};var c=a(1639),g=a(9885),m=a(9497),h=a(9546),w=a(1682),f=a(7220),y=a(2045),b=a(3246),k=a(490),_=a(1233),q=a(3115),Z=a(3388),W=a(9361),Q=a(935),C=a(2146),U=a(9984),P=a.n(U);const R=(0,c.Z)(p,[["render",s]]),$=R;P()(p,"components",{QPage:g.Z,QTable:m.Z,QTr:h.Z,QTh:w.Z,QTd:f.Z,QBtnDropdown:y.Z,QList:b.Z,QItem:k.Z,QItemSection:_.Z,QItemLabel:q.Z,QPageSticky:Z.Z,QFab:W.Z,QFabAction:Q.Z}),P()(p,"directives",{ClosePopup:C.Z})}}]);