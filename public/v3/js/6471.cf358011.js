"use strict";(globalThis["webpackChunkfirefly_iii"]=globalThis["webpackChunkfirefly_iii"]||[]).push([[6471],{6471:(t,a,n)=>{n.r(a),n.d(a,{default:()=>O});var s=n(9835),e=n(6970);const i=(0,s.Uk)(" (balance)"),r=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-left"},"Description"),(0,s._)("th",{class:"text-right"},"Opposing account"),(0,s._)("th",{class:"text-right"},"Amount")])],-1),o={class:"text-left"},c={key:0},u=(0,s._)("br",null,null,-1),l={key:0},p=(0,s._)("br",null,null,-1),h=(0,s._)("td",{class:"text-right"},"159",-1),d=(0,s._)("td",{class:"text-right"},"6",-1);function g(t,a,n,g,m,_){const w=(0,s.up)("q-item-label"),f=(0,s.up)("q-item-section"),b=(0,s.up)("q-item"),k=(0,s.up)("q-separator"),y=(0,s.up)("router-link"),T=(0,s.up)("q-markup-table"),G=(0,s.up)("q-card");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(G,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s._)("strong",null,(0,e.zw)(m.accountName),1),i])),_:1})])),_:1})])),_:1}),(0,s.Wm)(k),(0,s.Wm)(T,null,{default:(0,s.w5)((()=>[r,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.transactions,(t=>((0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",o,[(0,s.Wm)(y,{to:{name:"transactions.show",params:{id:t.transactionGroupId}}},{default:(0,s.w5)((()=>[t.transactions.length>1?((0,s.wg)(),(0,s.iD)("strong",c,[(0,s.Uk)((0,e.zw)(t.transactionGroupTitle),1),u])):(0,s.kq)("",!0)])),_:2},1032,["to"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.transactions,(a=>((0,s.wg)(),(0,s.iD)("span",null,[t.transactions.length>1?((0,s.wg)(),(0,s.iD)("span",l,[(0,s.Uk)((0,e.zw)(a.description)+" ",1),p])):(0,s.kq)("",!0),1===t.transactions.length?((0,s.wg)(),(0,s.j4)(y,{key:1,to:{name:"transactions.show",params:{id:t.transactionGroupId}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,e.zw)(a.description),1)])),_:2},1032,["to"])):(0,s.kq)("",!0)])))),256))]),h,d])))),256))])])),_:1})])),_:1})])}var m=n(8761),_=n.n(m),w=n(1569);class f{constructor(t){_()(this,"root","/api/v2/"),_()(this,"path",""),this.path=t}apiPath(){return this.root+this.path}apiPathWithObject(t){return this.root+this.path+"/"+t}apiGet(t,a){let n=this.apiPathWithObject(t);return a?w.api.get(n,{params:a}):w.api.get(n)}apiGetTransactions(t,a){let n=this.apiPathWithObject(t)+"/transactions";return a?w.api.get(n,{params:a}):w.api.get(n)}}class b extends f{constructor(){super("accounts")}get(t,a){let n={date:a};return a?this.apiGet(t,n):this.apiGet(t)}transactions(t,a){return a?this.apiGetTransactions(t,a):this.apiGetTransactions(t)}}var k=n(3555),y=n(8898);const T={name:"TransactionList",props:{accountId:0},data(){return{store:null,accountName:"",transactions:[]}},mounted(){this.store=(0,k.S)(),0!==this.accountId&&(this.getAccount(),this.store.$onAction((({name:t,$store:a,args:n,after:s,onError:e})=>{s((a=>{"setRange"===t&&this.getTransactions()}))})),this.getTransactions())},methods:{getAccount:function(){(new b).get(this.accountId).then((t=>this.parseAccount(t.data)))},parseAccount:function(t){this.accountName=t.data.attributes.name},getTransactions:function(){if(null!==this.store.getRange.start&&null!==this.store.getRange.end){const t=new Date(this.store.getRange.start),a=new Date(this.store.getRange.end);let n=(0,y.Z)(t,"y-MM-dd"),s=(0,y.Z)(a,"y-MM-dd");(new b).transactions(this.accountId,{start:n,end:s,limit:10}).then((t=>this.parseTransactions(t.data)))}},parseTransactions:function(t){for(let a in t.data)if(t.data.hasOwnProperty(a)){let n=t.data[a],s={transactionGroupId:n.id,transactionGroupTitle:n.attributes.group_title,transactions:[]};for(let t in n.attributes.transactions)if(n.attributes.transactions.hasOwnProperty(t)){let a=n.attributes.transactions[t],e={journalId:a.transaction_journal_id,description:a.description,amount:a.amount,currency_code:a.currency_code,destination_name:a.destination_name,destination_id:a.destination_id,type:a.type};s.transactions.push(e)}this.transactions.push(s)}}}};var G=n(1639),I=n(4458),D=n(490),W=n(1233),q=n(3115),Z=n(926),x=n(6933),j=n(9984),v=n.n(j);const A=(0,G.Z)(T,[["render",g]]),O=A;v()(T,"components",{QCard:I.Z,QItem:D.Z,QItemSection:W.Z,QItemLabel:q.Z,QSeparator:Z.Z,QMarkupTable:x.Z})}}]);