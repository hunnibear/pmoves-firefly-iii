"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[2382],{2382:(t,n,e)=>{e.r(n),e.d(n,{default:()=>B});var a=e(9835),r=e(6970);const i={key:0},o=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"text-left"},"Description"),(0,a._)("th",{class:"text-right"},"Opposing account"),(0,a._)("th",{class:"text-right"},"Amount")])],-1),s={class:"text-left"},c={key:0},u=(0,a._)("br",null,null,-1),l={key:0},d=(0,a._)("br",null,null,-1),_={class:"text-right"},p={key:0},g=(0,a._)("br",null,null,-1),h=[g],m={key:0},f={class:"text-right"},w={key:0},y=(0,a._)("br",null,null,-1),k=[y],v={key:0},b=["title"],D={key:2},q={key:0},A=["title"],C={key:3};function x(t,n,e,g,y,x){const I=(0,a.up)("q-item-label"),T=(0,a.up)("q-item-section"),G=(0,a.up)("q-item"),W=(0,a.up)("q-separator"),z=(0,a.up)("router-link"),Z=(0,a.up)("q-markup-table"),j=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(j,{bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("strong",null,(0,r.zw)(y.accountName),1),""!==y.accountCurrencyCode?((0,a.wg)(),(0,a.iD)("span",i," ("+(0,r.zw)(x.formatAmount(y.accountCurrencyCode,y.accountBalance))+") ",1)):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(W),(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[o,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.transactions,(n=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",s,[(0,a.Wm)(z,{class:(0,r.C_)(t.$q.dark.isActive?"text-red":"text-blue"),to:{name:"transactions.show",params:{id:n.transactionGroupId}}},{default:(0,a.w5)((()=>[n.transactions.length>1?((0,a.wg)(),(0,a.iD)("strong",c,[(0,a.Uk)((0,r.zw)(n.transactionGroupTitle),1),u])):(0,a.kq)("",!0)])),_:2},1032,["class","to"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.transactions,(e=>((0,a.wg)(),(0,a.iD)("span",null,[n.transactions.length>1?((0,a.wg)(),(0,a.iD)("span",l,[(0,a.Uk)((0,r.zw)(e.description)+" ",1),d])):(0,a.kq)("",!0),1===n.transactions.length?((0,a.wg)(),(0,a.j4)(z,{key:1,class:(0,r.C_)(t.$q.dark.isActive?"text-red":"text-blue"),to:{name:"transactions.show",params:{id:n.transactionGroupId}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.description),1)])),_:2},1032,["class","to"])):(0,a.kq)("",!0)])))),256))]),(0,a._)("td",_,[n.transactions.length>1?((0,a.wg)(),(0,a.iD)("span",p,h)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.transactions,(e=>((0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(z,{class:(0,r.C_)(t.$q.dark.isActive?"text-red":"text-blue"),to:{name:"accounts.show",params:{id:e.destination_id}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.destination_name),1)])),_:2},1032,["class","to"]),n.transactions.length>1?((0,a.wg)(),(0,a.iD)("br",m)):(0,a.kq)("",!0)])))),256))]),(0,a._)("td",f,[n.transactions.length>1?((0,a.wg)(),(0,a.iD)("span",w,k)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.transactions,(t=>((0,a.wg)(),(0,a.iD)("span",null,[!1===t.native_currency_converted?((0,a.wg)(),(0,a.iD)("span",v,(0,r.zw)(x.formatAmount(t.currency_code,t.amount)),1)):(0,a.kq)("",!0),!0===t.native_currency_converted?((0,a.wg)(),(0,a.iD)("span",{key:1,title:x.formatAmount(t.currency_code,t.amount)},(0,r.zw)(x.formatAmount(t.native_currency_code,t.native_amount)),9,b)):(0,a.kq)("",!0),null!==t.foreign_amount?((0,a.wg)(),(0,a.iD)("span",D,[!1===t.foreign_currency_converted?((0,a.wg)(),(0,a.iD)("span",q," ("+(0,r.zw)(x.formatAmount(t.foreign_currency_code,t.foreign_amount))+")",1)):(0,a.kq)("",!0),!0===t.foreign_currency_converted?((0,a.wg)(),(0,a.iD)("span",{key:1,title:x.formatAmount(t.foreign_currency_code,t.foreign_amount)}," ("+(0,r.zw)(x.formatAmount(t.native_currency_code,t.native_foreign_amount))+")",9,A)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),n.transactions.length>1?((0,a.wg)(),(0,a.iD)("br",C)):(0,a.kq)("",!0)])))),256))])])))),256))])])),_:1})])),_:1})])}var I=e(5148),T=e.n(I),G=e(1569);class W{constructor(t){T()(this,"root","/api/v2/"),T()(this,"path",""),this.path=t}apiPath(){return this.root+this.path}apiPathWithObject(t){return this.root+this.path+"/"+t}apiGet(t,n){let e=this.apiPathWithObject(t);return n?G.api.get(e,{params:n}):G.api.get(e)}apiGetTransactions(t,n){let e=this.apiPathWithObject(t)+"/transactions";return n?G.api.get(e,{params:n}):G.api.get(e)}}class z extends W{constructor(){super("accounts")}get(t,n){let e={date:n};return n?this.apiGet(t,e):this.apiGet(t)}transactions(t,n){return n?this.apiGetTransactions(t,n):this.apiGetTransactions(t)}}var Z=e(3555),j=e(8898);const O={name:"TransactionList",props:{accountId:0},data(){return{store:null,accountName:"",transactions:[],accountCurrencyCode:"",accountBalance:0}},mounted(){this.store=(0,Z.S)(),0!==this.accountId&&(this.getAccount(),this.store.$onAction((({name:t,$store:n,args:e,after:a,onError:r})=>{a((n=>{"setRange"===t&&this.getTransactions()}))})),this.getTransactions())},methods:{getAccount:function(){(new z).get(this.accountId).then((t=>this.parseAccount(t.data)))},parseAccount:function(t){console.log(t.data.attributes),this.accountName=t.data.attributes.name,this.accountBalance=t.data.attributes.current_balance,this.accountCurrencyCode=t.data.attributes.currency_code},getTransactions:function(){if(null!==this.store.getRange.start&&null!==this.store.getRange.end){const t=new Date(this.store.getRange.start),n=new Date(this.store.getRange.end);let e=(0,j.Z)(t,"y-MM-dd"),a=(0,j.Z)(n,"y-MM-dd");(new z).transactions(this.accountId,{start:e,end:a,limit:10}).then((t=>this.parseTransactions(t.data)))}},formatAmount:function(t,n){return Intl.NumberFormat(this.store.getLocale,{style:"currency",currency:t}).format(n)},parseTransactions:function(t){for(let n in t.data)if(t.data.hasOwnProperty(n)){let e=t.data[n],a={transactionGroupId:e.id,transactionGroupTitle:e.attributes.group_title,transactions:[]};for(let t in e.attributes.transactions)if(e.attributes.transactions.hasOwnProperty(t)){let n=e.attributes.transactions[t],r={journalId:n.transaction_journal_id,description:n.description,destination_name:n.destination_name,destination_id:n.destination_id,type:n.type,amount:n.amount,native_amount:n.native_amount,foreign_amount:n.foreign_amount,native_foreign_amount:n.native_foreign_amount,currency_code:n.currency_code,native_currency_code:n.native_currency_code,foreign_currency_code:n.foreign_currency_code,native_currency_converted:n.native_currency_converted,foreign_currency_converted:n.foreign_currency_converted};a.transactions.push(r)}this.transactions.push(a)}}}};var P=e(1639),Q=e(4458),M=e(490),R=e(1233),$=e(3115),H=e(926),K=e(6933),N=e(9984),U=e.n(N);const Y=(0,P.Z)(O,[["render",x]]),B=Y;U()(O,"components",{QCard:Q.Z,QItem:M.Z,QItemSection:R.Z,QItemLabel:$.Z,QSeparator:H.Z,QMarkupTable:K.Z})}}]);