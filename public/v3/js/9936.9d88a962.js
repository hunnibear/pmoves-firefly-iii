"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[9936],{9936:(t,e,s)=>{s.r(e),s.d(e,{default:()=>P});var a=s(9835),i=s(6970);const n={class:"q-mt-sm q-mr-sm"},o=(0,a._)("strong",null," Budgets ",-1),l={class:"row"},r={class:"col"},d={class:"row"},u={class:"col"},g=(0,a._)("br",null,null,-1),c=(0,a._)("br",null,null,-1),m=(0,a._)("div",{class:"col"}," I am bar ",-1),p=(0,a._)("div",{class:"row"},[(0,a._)("div",{class:"col"},[(0,a.Uk)(" I am no budget"),(0,a._)("br")])],-1);function h(t,e,s,h,w,f){const b=(0,a.up)("q-item-label"),_=(0,a.up)("q-item-section"),v=(0,a.up)("q-item"),B=(0,a.up)("q-separator"),k=(0,a.up)("router-link"),Z=(0,a.up)("q-card-section"),q=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(q,{bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[o])),_:1})])),_:1})])),_:1}),(0,a.Wm)(B),(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.budgets,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",l,[(0,a._)("div",r,[(0,a.Wm)(k,{to:{name:"budgets.show",params:{id:t.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.name),1)])),_:2},1032,["to"])])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.limits,(t=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("small",null,(0,i.zw)(t.amount),1),g,(0,a.Uk)(" "+(0,i.zw)(t.start),1),c,(0,a.Uk)(" "+(0,i.zw)(t.end),1)]),m])])))),256))])))),128)),p])),_:1})])),_:1})])}var w=s(3555),f=s(1569);class b{list(t){let e="/api/v2/budgets";return f.api.get(e,{params:{page:t}})}}var _=s(8898);class v{list(t,e,s,a){let i="/api/v2/budgets/"+t+"/limits",n=(0,_.Z)(e,"y-MM-dd"),o=(0,_.Z)(s,"y-MM-dd");return f.api.get(i,{params:{page:a,start:n,end:o}})}}const B={name:"BudgetBox",data(){return{budgets:[],locale:"en-US",page:1,loadingBudgets:!1}},mounted(){this.store=(0,w.S)(),this.store.$onAction((({name:t,store:e,args:s,after:a,onError:i})=>{a((e=>{"setRange"===t&&(this.locale=this.store.getLocale,this.loadBox())}))})),null!==this.store.getRange.start&&null!==this.store.getRange.end&&this.loadBox()},methods:{loadBox:function(){this.loadingBudgets=!0,(new b).list(this.page).then((t=>{if(this.parseBudgets(t.data.data),t.data.meta.pagination.current_page<t.data.meta.pagination.total_pages)return this.page=t.data.meta.pagination.current_page+1,void this.loadBox();this.loadingBudgets=!1,this.processBudgets()}))},parseBudgets:function(t){for(let e in t)if(t.hasOwnProperty(e)){const s=t[e];this.budgets.push({id:parseInt(s.id),name:s.attributes.name,limits:[]})}},processBudgets:function(){for(let t in this.budgets)if(this.budgets.hasOwnProperty(t)){const e=this.budgets[t];(new v).list(e.id,this.store.getRange.start,this.store.getRange.end,1).then((t=>{this.parseBudgetLimits(t.data.data,e)}))}console.log("Processing...")},parseBudgetLimits:function(t,e){console.log("Parse for "+e.name);for(let s in t)if(t.hasOwnProperty(s)){const a=t[s];e.limits.push({amount:a.attributes.amount,start:new Date(a.attributes.start),end:new Date(a.attributes.end)}),console.log("A "+new Date(a.attributes.start)),console.log("B "+this.store.getRange.start)}}}};var k=s(1639),Z=s(4458),q=s(490),y=s(1233),D=s(3115),W=s(926),I=s(3190),Q=s(9984),R=s.n(Q);const x=(0,k.Z)(B,[["render",h]]),P=x;R()(B,"components",{QCard:Z.Z,QItem:q.Z,QItemSection:y.Z,QItemLabel:D.Z,QSeparator:W.Z,QCardSection:I.Z})}}]);