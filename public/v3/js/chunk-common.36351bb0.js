"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[3064],{1901:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t,e){let a="/api/v1/accounts/"+t;return e?r.api.get(a,{params:{date:e}}):r.api.get(a)}transactions(t,e,a){let s="/api/v1/accounts/"+t+"/transactions";return r.api.get(s,{params:{page:e,cache:a}})}}},3349:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{list(t,e,a){let s="/api/v1/accounts";return r.api.get(s,{params:{page:e,cache:a,type:t}})}}},5077:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{post(t){let e="/api/v1/accounts";return r.api.post(e,t)}}},7914:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/budgets/"+t;return r.api.get(e)}transactions(t,e,a){let s="/api/v1/budgets/"+t+"/transactions";return r.api.get(s,{params:{page:e,cache:a}})}transactionsWithoutBudget(t,e){let a="/api/v1/budgets/transactions-without-budget";return r.api.get(a,{params:{page:t,cache:e}})}}},3386:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/categories/"+t;return r.api.get(e)}transactions(t,e,a){let s="/api/v1/categories/"+t+"/transactions";return r.api.get(s,{params:{page:e,cache:a}})}transactionsWithoutCategory(t,e){let a="/api/v1/categories/transactions-without-category";return r.api.get(a,{params:{page:t,cache:e}})}}},4969:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/currencies/"+t;return r.api.get(e)}transactions(t,e,a){let s="/api/v1/currencies/"+t+"/transactions";return r.api.get(s,{params:{page:e,cache:a}})}}},5819:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{list(t,e){let a="/api/v1/currencies";return r.api.get(a,{params:{page:t,cache:e}})}}},3081:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{post(t){let e="/api/v1/currencies";return r.api.post(e,t)}makeDefault(t){let e="/api/v1/currencies/"+t+"/default";return r.api.post(e)}}},1403:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/object_groups/"+t;return r.api.get(e)}}},4852:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/piggy_banks/"+t;return r.api.get(e)}transactions(t,e,a){let s="/api/v1/piggy_banks/"+t+"/transactions";return r.api.get(s,{params:{page:e,cache:a}})}}},1396:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{put(t,e){let a="/api/v1/preferences/"+t;return r.api.put(a,{data:e})}}},96:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/recurrences/"+t;return r.api.get(e)}}},4145:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t,e){let a="/api/v1/rule_groups/"+t;return e?r.api.get(a,{params:{date:e}}):r.api.get(a)}rules(t,e,a){let s="/api/v1/rule_groups/"+t+"/rules";return r.api.get(s,{params:{page:e,cache:a}})}}},1054:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{list(t,e){let a="/api/v1/rule_groups";return r.api.get(a,{params:{page:t,cache:e}})}}},8240:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t,e){let a="/api/v1/rules/"+t;return e?r.api.get(a,{params:{date:e}}):r.api.get(a)}}},7859:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/bills/"+t;return r.api.get(e)}transactions(t,e,a){let s="/api/v1/bills/"+t+"/transactions";return r.api.get(s,{params:{page:e,cache:a}})}}},3410:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){return r.api.get("/api/v1/configuration/"+t)}put(t,e){return r.api.put("/api/v1/configuration/"+t,e)}}},9961:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="api/v1/transactions/"+t;return r.api.get(e)}}},4682:(t,e,a)=>{a.d(e,{Z:()=>r});a(246);class r{parseResponse(t){let e={rows:[]};e.rowsPerPage=t.data.meta.pagination.per_page,e.rowsNumber=t.data.meta.pagination.total;for(let a in t.data.data)if(t.data.data.hasOwnProperty(a)){let r=t.data.data[a],s={group_id:r.id,splits:[],group_title:r.attributes.group_title};for(let t in r.attributes.transactions)if(r.attributes.transactions.hasOwnProperty(t)){let e=r.attributes.transactions[t],a={group_id:r.id,journal_id:parseInt(e.transaction_journal_id),type:e.type,description:e.description,amount:e.amount,date:e.date,source:e.source_name,destination:e.destination_name,category:e.category_name,budget:e.budget_name,currencyCode:e.currency_code};1===r.attributes.transactions.length&&0===parseInt(t)&&(s.group_title=e.description),0===parseInt(t)&&(s={...s,...a}),r.attributes.transactions.length>0&&(s.splits.push(a),t>0&&(s.amount=parseFloat(s.amount)+parseFloat(a.amount)))}e.rows.push(s)}return e}}},4514:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5474);class s{get(t){let e="/api/v1/webhooks/"+t;return r.api.get(e)}}},8124:(t,e,a)=>{a.d(e,{Z:()=>N});a(246);var r=a(3673),s=a(2323),n=a(8880);const i={key:0},o={key:1},p=(0,r.Uk)("Edit"),l=(0,r.Uk)("Delete"),u={class:"text-left"},c=(0,r.Uk)(" j ");function d(t,e,a,d,g,w){const m=(0,r.up)("q-th"),f=(0,r.up)("q-tr"),y=(0,r.up)("q-btn"),_=(0,r.up)("q-td"),h=(0,r.up)("q-icon"),k=(0,r.up)("router-link"),b=(0,r.up)("q-item-label"),v=(0,r.up)("q-item-section"),Z=(0,r.up)("q-item"),W=(0,r.up)("q-list"),q=(0,r.up)("q-btn-dropdown"),z=(0,r.up)("q-table"),C=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(z,{title:a.title,rows:a.rows,columns:g.columns,"row-key":"group_id",pagination:g.pagination,"onUpdate:pagination":e[0]||(e[0]=t=>g.pagination=t),loading:a.loading,class:"q-ma-md",onRequest:w.onRequest},{header:(0,r.w5)((t=>[(0,r.Wm)(f,{props:t},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{"auto-width":""}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.cols,(e=>((0,r.wg)(),(0,r.j4)(m,{key:e.name,props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,r.w5)((t=>[(0,r.Wm)(f,{props:t},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{"auto-width":""},{default:(0,r.w5)((()=>[t.row.splits.length>1?((0,r.wg)(),(0,r.j4)(y,{key:0,size:"sm",round:"",dense:"",onClick:e=>t.expand=!t.expand,icon:t.expand?"fas fa-minus-circle":"fas fa-plus-circle"},null,8,["onClick","icon"])):(0,r.kq)("",!0)])),_:2},1024),(0,r.Wm)(_,{key:"type",props:t},{default:(0,r.w5)((()=>["deposit"===t.row.type.toLowerCase()?((0,r.wg)(),(0,r.j4)(h,{key:0,class:"fas fa-long-arrow-alt-right"})):(0,r.kq)("",!0),"withdrawal"===t.row.type.toLowerCase()?((0,r.wg)(),(0,r.j4)(h,{key:1,class:"fas fa-long-arrow-alt-left"})):(0,r.kq)("",!0),"transfer"===t.row.type.toLowerCase()?((0,r.wg)(),(0,r.j4)(h,{key:2,class:"fas fa-arrows-alt-h"})):(0,r.kq)("",!0)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"description",props:t},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{to:{name:"transactions.show",params:{id:t.row.group_id}},class:"text-primary"},{default:(0,r.w5)((()=>[1===t.row.splits.length?((0,r.wg)(),(0,r.iD)("span",i,(0,s.zw)(t.row.description),1)):(0,r.kq)("",!0),t.row.splits.length>1?((0,r.wg)(),(0,r.iD)("span",o,(0,s.zw)(t.row.group_title),1)):(0,r.kq)("",!0)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"amount",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(w.formatAmount(t.row.currencyCode,t.row.amount)),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"date",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(w.formatDate(t.row.date)),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"source",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.row.source),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"destination",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.row.destination),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"category",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.row.category),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"budget",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.row.budget),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"menu",props:t},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{color:"primary",label:"Actions",size:"sm"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,null,{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(Z,{clickable:"",to:{name:"transactions.edit",params:{id:t.row.group_id}}},{default:(0,r.w5)((()=>[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[p])),_:1})])),_:1})])),_:2},1032,["to"])),[[C]]),(0,r.wy)(((0,r.wg)(),(0,r.j4)(Z,{clickable:"",onClick:e=>w.deleteTransaction(t.row.group_id,t.row.description,t.row.group_title)},{default:(0,r.w5)((()=>[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[l])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[C]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["props"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.row.splits,(e=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(f,{props:t},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{"auto-width":""}),(0,r.Wm)(_,{"auto-width":""}),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r._)("div",u,(0,s.zw)(e.description),1)])),_:2},1024),(0,r.Wm)(_,{key:"amount",props:t},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(w.formatAmount(e.currencyCode,e.amount)),1)])),_:2},1032,["props"]),(0,r.Wm)(_,{key:"date"}),(0,r.Wm)(_,{key:"source"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.source),1)])),_:2},1024),(0,r.Wm)(_,{key:"destination"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.destination),1)])),_:2},1024),(0,r.Wm)(_,{key:"category"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.category),1)])),_:2},1024),(0,r.Wm)(_,{key:"budget"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.budget),1)])),_:2},1024),(0,r.Wm)(_,{key:"menu",props:t},{default:(0,r.w5)((()=>[c])),_:2},1032,["props"])])),_:2},1032,["props"])),[[n.F8,t.expand]]))),256))])),_:1},8,["title","rows","columns","pagination","loading","onRequest"])}var g=a(6810),w=a(5474);class m{destroy(t){let e="/api/v1/transactions/"+t;return w.api["delete"](e)}}const f={name:"LargeTable",props:{title:String,rows:Array,loading:Boolean,page:Number,rowsPerPage:Number,rowsNumber:Number},data(){return{pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100},columns:[{name:"type",label:" ",field:"type",style:"width: 30px"},{name:"description",label:"Description",field:"description",align:"left"},{name:"amount",label:"Amount",field:"amount"},{name:"date",label:"Date",field:"date",align:"left"},{name:"source",label:"Source",field:"source",align:"left"},{name:"destination",label:"Destination",field:"destination",align:"left"},{name:"category",label:"Category",field:"category",align:"left"},{name:"budget",label:"Budget",field:"budget",align:"left"},{name:"menu",label:" ",field:"menu",align:"left"}]}},mounted(){this.pagination.page=this.page,this.pagination.rowsPerPage=this.rowsPerPage,this.pagination.rowsNumber=this.rowsNumber},watch:{page:function(t){this.pagination.page=t},rowsPerPage:function(t){this.pagination.rowsPerPage=t},rowsNumber:function(t){this.pagination.rowsNumber=t}},methods:{formatDate:function(t){return(0,g.Z)(new Date(t),this.$t("config.month_and_day_fns"))},formatAmount:function(t,e){return Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)},onRequest:function(t){this.$emit("on-request",{page:t.pagination.page})},deleteTransaction:function(t,e,a){let r=e;""!==a&&(r=a),this.$q.dialog({title:"Confirm",message:'Do you want to delete transaction "'+r+'"?',cancel:!0,persistent:!0}).onOk((()=>{this.destroyTransaction(t)}))},destroyTransaction:function(t){let e=new m;e.destroy(t).then((()=>{this.$store.dispatch("fireflyiii/refreshCacheKey")}))}}};var y=a(4260),_=a(4993),h=a(8186),k=a(2414),b=a(3884),v=a(2165),Z=a(4554),W=a(2226),q=a(7011),z=a(3414),C=a(2035),P=a(2350),U=a(677),D=a(7518),j=a.n(D);const Q=(0,y.Z)(f,[["render",d]]),N=Q;j()(f,"components",{QTable:_.Z,QTr:h.Z,QTh:k.Z,QTd:b.Z,QBtn:v.Z,QIcon:Z.Z,QBtnDropdown:W.Z,QList:q.Z,QItem:z.Z,QItemSection:C.Z,QItemLabel:P.Z}),j()(f,"directives",{ClosePopup:U.Z})}}]);