"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[2195],{2195:(t,e,r)=>{r.r(e),r.d(e,{default:()=>N});r(702);var s=r(9835),n=r(6970);const i={class:"row"},l={class:"col-4 q-pr-sm q-pr-sm"},a={class:"text-overline"},o={class:"float-right"},d={key:0},p={class:"col-4 q-pr-sm q-pl-sm"},g={class:"text-overline"},u={class:"float-right"},c=["title"],f={key:0},h={class:"col-4 q-pl-sm"},w={class:"text-overline"},y={class:"float-right"},_=["title"],U={key:0},m={key:0};function k(t,e,r,k,v,C){const W=(0,s.up)("q-card-section"),b=(0,s.up)("q-card");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",l,[(0,s.Wm)(b,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",a,[(0,s.Uk)((0,n.zw)(t.$t("firefly.bills_to_pay"))+" ",1),(0,s._)("span",o,[(0,s._)("span",{class:"text-grey-4 fas fa-redo-alt",style:{cursor:"pointer"},onClick:e[0]||(e[0]=(...t)=>C.triggerForcedUpgrade&&C.triggerForcedUpgrade(...t))})])])])),_:1}),(0,s.Wm)(W,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.prefBillsUnpaid,(t=>((0,s.wg)(),(0,s.iD)("span",null,(0,n.zw)(t.value_parsed),1)))),256)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.notPrefBillsUnpaid,((t,e)=>((0,s.wg)(),(0,s.iD)("span",null,[(0,s.Uk)((0,n.zw)(t.value_parsed),1),e+1!==C.notPrefBillsUnpaid.length?((0,s.wg)(),(0,s.iD)("span",d,", ")):(0,s.kq)("",!0)])))),256))])),_:1})])),_:1})]),(0,s._)("div",p,[(0,s.Wm)(b,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",g,[(0,s.Uk)((0,n.zw)(t.$t("firefly.left_to_spend"))+" ",1),(0,s._)("span",u,[(0,s._)("span",{class:"text-grey-4 fas fa-redo-alt",style:{cursor:"pointer"},onClick:e[1]||(e[1]=(...t)=>C.triggerForcedUpgrade&&C.triggerForcedUpgrade(...t))})])])])),_:1}),(0,s.Wm)(W,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.prefLeftToSpend,(t=>((0,s.wg)(),(0,s.iD)("span",{title:t.sub_title},(0,n.zw)(t.value_parsed),9,c)))),256)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.notPrefLeftToSpend,((t,e)=>((0,s.wg)(),(0,s.iD)("span",null,[(0,s.Uk)((0,n.zw)(t.value_parsed),1),e+1!==C.notPrefLeftToSpend.length?((0,s.wg)(),(0,s.iD)("span",f,", ")):(0,s.kq)("",!0)])))),256))])),_:1})])),_:1})]),(0,s._)("div",h,[(0,s.Wm)(b,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s.Uk)((0,n.zw)(t.$t("firefly.net_worth"))+" ",1),(0,s._)("span",y,[(0,s._)("span",{class:"text-grey-4 fas fa-redo-alt",style:{cursor:"pointer"},onClick:e[2]||(e[2]=(...t)=>C.triggerForcedUpgrade&&C.triggerForcedUpgrade(...t))})])])])),_:1}),(0,s.Wm)(W,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.prefNetWorth,(t=>((0,s.wg)(),(0,s.iD)("span",{title:t.sub_title},(0,n.zw)(t.value_parsed),9,_)))),256)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.notPrefNetWorth,((t,e)=>((0,s.wg)(),(0,s.iD)("span",null,[(0,s.Uk)((0,n.zw)(t.value_parsed),1),e+1!==C.notPrefNetWorth.length?((0,s.wg)(),(0,s.iD)("span",U,", ")):(0,s.kq)("",!0)])))),256)),0===C.notPrefNetWorth.length?((0,s.wg)(),(0,s.iD)("span",m,"Â ")):(0,s.kq)("",!0)])),_:1})])),_:1})])])}var v=r(1569),C=r(8898);class W{list(t,e){let r=(0,C.Z)(t.start,"y-MM-dd"),s=(0,C.Z)(t.end,"y-MM-dd");return v.api.get("/api/v1/summary/basic",{params:{start:r,end:s,cache:e}})}}var b=r(3555);const q={name:"Boxes",computed:{prefBillsUnpaid:function(){return this.filterOnCurrency(this.billsUnpaid)},notPrefBillsUnpaid:function(){return this.filterOnNotCurrency(this.billsUnpaid)},prefLeftToSpend:function(){return this.filterOnCurrency(this.leftToSpend)},notPrefLeftToSpend:function(){return this.filterOnNotCurrency(this.leftToSpend)},prefNetWorth:function(){return this.filterOnCurrency(this.netWorth)},notPrefNetWorth:function(){return this.filterOnNotCurrency(this.netWorth)}},created(){},data(){return{summary:[],billsPaid:[],billsUnpaid:[],leftToSpend:[],netWorth:[],range:{start:null,end:null},store:null}},mounted(){this.store=(0,b.S)(),null!==this.range.start&&null!==this.range.end||this.store.$onAction((({name:t,$store:e,args:r,after:s,onError:n})=>{s((e=>{"setRange"===t&&(this.range=e,this.triggerUpdate())}))})),null!==this.store.getRange.start&&null!==this.store.getRange.end&&(this.start=this.store.getRange.start,this.end=this.store.getRange.end,this.triggerUpdate())},methods:{triggerForcedUpgrade:function(){this.store.refreshCacheKey(),this.triggerUpdate()},triggerUpdate:function(){if(null!==this.store.getRange.start&&null!==this.store.getRange.end){const t=new W;t.list({start:this.store.getRange.start,end:this.store.getRange.end},this.store.getCacheKey).then((t=>{this.netWorth=this.getKeyedEntries(t.data,"net-worth-in-"),this.leftToSpend=this.getKeyedEntries(t.data,"left-to-spend-in-"),this.billsPaid=this.getKeyedEntries(t.data,"bills-paid-in-"),this.billsUnpaid=this.getKeyedEntries(t.data,"bills-unpaid-in-")}))}},getKeyedEntries(t,e){let r=[];for(const s in t)t.hasOwnProperty(s)&&e===s.substr(0,e.length)&&r.push(t[s]);return r},filterOnCurrency(t){let e=[];for(const r in t)t.hasOwnProperty(r)&&t[r].currency_id===this.store.getCurrencyId&&e.push(t[r]);return 0===e.length&&t.hasOwnProperty(0)&&e.push(t[0]),e},filterOnNotCurrency(t){let e=[];for(const r in t)t.hasOwnProperty(r)&&t[r].currency_id!==this.store.getCurrencyId&&e.push(t[r]);return e}}};var D=r(1639),P=r(4458),x=r(3190),K=r(9984),O=r.n(K);const S=(0,D.Z)(q,[["render",k]]),N=S;O()(q,"components",{QCard:P.Z,QCardSection:x.Z})}}]);